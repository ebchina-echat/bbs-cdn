# bbs-cdn
å…¨çƒå…è´¹CDNåº“

## å‘ç‰ˆæ­¥éª¤åŠç›¸å…³æ³¨æ„ç‚¹

> è¿˜æ²¡æœ‰ git å·¥å…·ï¼šè§ **[ä¸‹æ–‡](#ç”Ÿæˆå¯¹åº”sshå¯†é’¥)**

ä¸€ã€åœ¨é¡¹ç›®ï¼ˆä¸æ˜¯æœ¬ä»“åº“ï¼‰æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œç›¸åº”çš„å‘½ä»¤
> ä½¿ç”¨å‘½ä»¤ï¼šnpm version <update_type> è¿›è¡Œä¿®æ”¹ï¼Œupdate_type æœ‰ä¸‰ä¸ªå‚æ•°:
> -  patchï¼šè¿™ä¸ªæ˜¯è¡¥ä¸çš„æ„æ€ï¼Œè¡¥ä¸æœ€åˆé€‚ï¼›
> -  minorï¼šè¿™ä¸ªæ˜¯å°ä¿®å°æ”¹ï¼›
> -  majorï¼šè¿™ä¸ªæ˜¯å¤§æ”¹å’¯ï¼›

ç®€å•ç‚¹è¯´ï¼Œå‡å¦‚å½“å‰ç‰ˆæœ¬ä¸ºï¼š1.0.0
- æ¯”å¦‚æˆ‘æƒ³æ¥ä¸ª 1.0.1 ç‰ˆæœ¬ï¼Œæ³¨æ„ï¼Œæ˜¯æœ€åä¸€ä½ä¿®æ”¹äº†å¢ 1ï¼Œé‚£ä¹ˆå‘½ä»¤ï¼š`$ npm version patch`
- æ¯”å¦‚æˆ‘æƒ³æ¥ä¸ª 1.1.0 ç‰ˆæœ¬ï¼Œæ³¨æ„ï¼Œæ˜¯ç¬¬äºŒä½ä¿®æ”¹äº†å¢ 1ï¼Œé‚£ä¹ˆå‘½ä»¤ï¼šÂ  Â  `$ npm version minor`
- æ¯”å¦‚æˆ‘æƒ³æ¥ä¸ª 2.0.0 ç‰ˆæœ¬ï¼Œæ³¨æ„ï¼Œæ˜¯ç¬¬ä¸€ä½ä¿®æ”¹äº†å¢ 1ï¼Œé‚£ä¹ˆå‘½ä»¤ï¼šÂ  Â  `npm version major`

**æ³¨æ„ $ åªæ˜¯ç”¨æ¥è¡¨ç¤ºæ˜¯åœ¨å‘½ä»¤è¡Œç¯å¢ƒä¸­ï¼ˆä¸‹åŒï¼‰ï¼Œå¯åƒä¸‡åˆ«å¤åˆ¶å“ˆ** 

è¿™é‡Œä»¥å°ç‰ˆæœ¬ä¸ºä¾‹ï¼š 

`$ npm version patch`  

äºŒã€åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿è¡Œæ‰“åŒ…å‘½ä»¤

-å…ˆæ£€æŸ¥ `vue.config.js` æœ‰æ²¡æœ‰å¦‚ä¸‹ä»£ç ï¼Œæ²¡æœ‰å°±åŠ ä¸Š
```js
// vue.config.js
const fs = require("fs");
const json = JSON.parse(fs.readFileSync("package.json", "utf8"));
const version = json.version;
module.exports = {
  // é‡ç‚¹å…³æ³¨è¿™ä¸ªå­—æ®µ
  publicPath: process.env.NODE_ENV === 'production' ? publicPath = `https://cdn.jsdelivr.net/gh/ebchina-echat/bbs-cdn@${version}/dist/` : '/forum',
  productionSourceMap: false,
   // Â·Â·Â· çœç•¥éƒ¨åˆ†ä»£ç ï¼Œè¿™è¡Œä¹Ÿåˆ«å¤åˆ¶å“ˆï¼ŒğŸ˜³
}
```
å¦‚æœæ£€æŸ¥æ²¡æœ‰é—®é¢˜ï¼Œè¿è¡Œä¸‹æ–¹å‘½ä»¤æ‰“åŒ…
`$ npm run build`

ä¸‰ã€æ¸…ç©ºæœ¬ä»“åº“ dist æ‰€æœ‰ç›®å½•ï¼Œå°†æ‰“åŒ…ç”Ÿæˆçš„ dist ç›®å½•ç›´æ¥å¤åˆ¶è¿‡æ¥å°±å¯ä»¥



`$ git add .`

`$ git commit -m "Update Version version(ä¿®æ”¹æˆå¯¹åº”çš„ç‰ˆæœ¬å·)"`

> æ­¤å¤„å¯èƒ½éœ€ç™»å½•è´¦å·ï¼Œå¦‚æœæ‹‰ä»£ç ç”¨ ` git clone git@github.com:ebchina-echat/bbs-cdn.git ` å¯ä»¥å…å»ï¼Œå‰ææ˜¯å…ˆé…ç½® ssh å¯†é’¥ï¼Œè¯¦è§ **[ä¸‹æ–‡](#ç”Ÿæˆå¯¹åº”sshå¯†é’¥)**

`$ git push -u git push -u origin master `

## æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆ
ä» dist ç›®å½•ä¸­éšä¾¿å¤åˆ¶ä¸€ä¸ªé™æ€æ–‡ä»¶é“¾æ¥ï¼Œæ£€æŸ¥ä¸€ä¸‹ï¼Œæ¯”å¦‚ï¼š
https://cdn.jsdelivr.net/gh/ebchina-echat/bbs-cdn@1.2.0/dist/js/app.7950609e.js

## è·å–å†å²åŒ…
å°†ä¸‹æ–¹çš„é“¾æ¥ä¸­ ${version} æ¢æˆç›¸å¯¹åº”çš„ç‰ˆæœ¬å·å³å¯å›é€€ç‰ˆæœ¬ï¼Œè®°ä½å¯¹åº”çš„ index.html ä¹Ÿå¾—åŒæ­¥æ›´æ”¹
- https://cdn.jsdelivr.net/gh/ebchina-echat/bbs-cdn@${version}/dist/js/app.7950609e.js

## todo

- æ¨åˆ° dev åˆ†æ”¯å³å¯ï¼Œå‰©ä¸‹çš„äº¤ç»™ CI å»è§£å†³

## ç”Ÿæˆå¯¹åº” ssh å¯†é’¥ï¼Œå…å»ç™»å½•

### å®‰è£… Git

å¦‚æœä½ å…ˆå‰å·²ä½¿ç”¨è¿‡ [Git](https://gitforwindows.org/) æ¥ä½œä¸ºä½ è¿›è¡Œé¡¹ç›®å¼€å‘æ—¶çš„é»˜è®¤å‘½ä»¤è¡Œå·¥å…·ï¼Œåˆ™è¯¥å·¥å…·å°†ä¼šé»˜è®¤ä¸ºä½ å®‰è£…å¥½ Gitã€‚

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ£€æµ‹æ˜¯å¦æˆåŠŸå®‰è£…ï¼š
æœ€å¥½ä½¿ç”¨åˆšåˆšä¸‹è½½å¥½çš„ <kbd>git</kbd> æˆ–è€…, æŒ‰<kbd>Alt</kbd>+<kbd>R</kbd> åœ¨å¼¹å‡ºæ¡†ä¸­è¾“å…¥<kbd>cmd</kbd>ï¼Œ<kbd>Enter</kbd>å›è½¦ï¼Œå†åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼Œ`git --version` ï¼Œ å¦‚ä¸‹ï¼š
```
$ git --version
git version 2.26.2.windows.2
```
ç”Ÿæˆ SSH Keyï¼Œè¯·å°†  <kbd>your_email@example.com</kbd> æ›¿æ¢ä¸ºä½ çš„é‚®ç®±ï¼š

```
$ ssh-keygen -t rsa -C "your_email@example.com"
Generating public/private rsa key pair.
```
å‰©ä¸‹çš„å¯ä»¥éƒ½é€‰æ‹©é»˜è®¤ï¼Œä¸€è·¯ <kbd>Enter</kbd> é”®å³å¯ï¼Œå®Œæˆä»¥åï¼Œè¾“å…¥ï¼š`cat ~/.ssh/id_rsa.pub`ï¼Œå°†ç”Ÿæˆçš„å¯†é’¥ä¸Šä¼ åˆ° github ä¸­ã€‚

ç”³è¯·ä¸ªgithubè´¦å·ï¼Œç™»é™†åï¼Œç‚¹å‡» [https://github.com/settings/ssh/new](https://github.com/settings/ssh/new),å°†å…¬é’¥ç²˜è´´ä¸Šå»ï¼Œå°±æ¬§å…‹äº†ï¼
